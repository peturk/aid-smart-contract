<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Smart Aid</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <h1 class="text-center">Smart Aid</h1>
          <hr/>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-push-2">
          <h3 class="panel-title">Funds Raised: <strong><span id="ETHRaised"></span></strong> out of <span id="ETHGoal"></span> Eth</h3>
          <p>Campaing ends: <span id="EndTime"></span></p>
          <br/>
        </div>
      </div>
 
      <!-- map -->
      <div id="map"></div>
      


      <!-- 
      <div>
        <button id="simulate" class="btn btn-primary">
          Hlaða JSON
        </button>
      </div>
            
      
      <div class="container">
          <form
            id = "TheForm"
            action = "#"
            method = "POST"
          >
          <div class="form-group row">
            <label for="vindhradi" class="col-sm-1 col-form-label" id=texti>Vindhraði</label>
            <div class="col-sm-10">
              <input type = "text" name = "vindhradi" class="form-inline">
              <input type = "submit" value = "Submit" class="btn btn-primary">
            </div>
          </div>
        </form>
      </div>
      -->
      <div id="petsRow" class="row">
        <div class="col-sm-6 col-sm-push-3 col-md-4 col-md-push-4">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">My Wallet</h3>
            </div>
            <div class="panel-body">
              <!-- handrit -->
              <div>
                <button id="handrit" class="btn btn-primary" >
                  Handrit
                </button>
              </div>
              <h4>Balance</h4>
              Your Token balance: <strong><span id="tokenBalance"></span></strong> tokens<br/><br/>
              Get 1 token for <strong><span id="1TokenPrice"></span></strong> Eth<br/>
              <button class="btn btn-primary" id="buy1Tokens" type="button">Buy 1 Token</button><br/>
              <p id='response1'></p><br/>
              Get 10 tokens for <strong><span id="10TokenPrice"></span></strong> Eth<br/>
              <button class="btn btn-primary" id="buy10Tokens" type="button">Buy 10 Tokens</button><br/>
              <p id='response10'></p><br/>
              Get 100 tokens for <strong><span id="100TokenPrice"></span></strong> Eth<br/>
              <button class="btn btn-primary" id="buy100Tokens" type="button">Buy 100 Tokens</button><br/>
              <p id='response100'></p><br/>
              To display your token balance in Metamask, add following address:<br/>
              <span id='TokenContractAddress'></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>

    <!-- Map API -->
    <script>
        document.getElementById("handrit").onclick = function () { 
          console.log("Spila handrit...")
          //RVK = 64.0888148,-21.9004728
          //AK = 65.6792341,-18.101615
          setTimeout(function() { setImage(65.6792341,-18.101615, 20); }, 35000);
          setTimeout(removeImage, 40000);
          setTimeout(function() { setImage(65.266874, -14.394847, 20); }, 45000);
          setTimeout(removeImage, 50000);
        };
        
        var sweet
        var oldSweet = sweet
        $.getJSON( "/disaster_areas.json", callbackFuncWithData);
        function callbackFuncWithData(data)
        {
          let hello = data
          sweet = hello[0].vindhradi
          console.log(sweet)
          console.log("Here is some: "+ hello[0].vindhradi)
        }
        console.log("What is here: " + sweet)
        var windImage;
        var map;
        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            zoom: 6.2,
            center: {lat: 64.7343702, lng: -19.035984}
          });
        }
        
        function setImage(lat, long, speed) {
          speed = sweet
          var offset = Math.sqrt(speed)/10;
          var imageBounds = {
            north: lat+0.1+offset,
            south: lat-0.1-offset,
            east:  long+0.3+offset,
            west:  long-0.3-offset
          };
          windImage = new google.maps.GroundOverlay(
              'http://www.pngmart.com/files/3/Wind-PNG-Clipart.png',
              imageBounds);
          windImage.setMap(map);
          //Remove image after 10 seconds
          //setTimeout(removeImage, 10000);
    
        } 
        
        function removeImage() {
          windImage.setMap(null);
        }
      </script>

      <!-- Style for button & map -->
      <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD5Nx5qZdIfASvSZBVpCqt_ZYSUdH7dZd4&callback=initMap">
      </script>
      <style>
          /* Always set the map height explicitly to define the size of the div
          * element that contains the map. */
          #texti {
            font-size: 20px;
            margin-right: 10px;
            margin-left: -10px;
          }
          #map {
            height: 400px;
          }
          /* Optional: Makes the sample page fill the window. */
          html, body {
            height: 100%;
            margin: 0;
            padding: 0;
          }
        </style>
  </body>
</html>
